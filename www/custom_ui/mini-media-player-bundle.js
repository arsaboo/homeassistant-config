(function(){"use strict";function a(){const b=M(["<span class='media-label'>","</span>"]);return a=function(){return b},b}function b(){const a=M(["<iron-icon .icon=","></iron-icon>"]);return b=function(){return a},a}function c(){const a=M(["\n          <mwc-button dense raised columns=","\n            class='media-buttons__button'\n            @click='","'>\n            ","\n            ","\n          </mwc-button>"]);return c=function(){return a},a}function d(){const a=M(["\n      <div class='media-buttons'>\n        ","\n      </div>"]);return d=function(){return a},a}function e(){const a=M(["<span class='media-label'>","</span>"]);return e=function(){return a},a}function f(){const a=M(["<iron-icon .icon=","></iron-icon>"]);return f=function(){return a},a}function g(){const a=M(["\n            <paper-item @click=",">\n              ","\n              ","\n            </paper-item>"]);return g=function(){return a},a}function h(){const a=M(["\n      <paper-menu-button class='media-dropdown'\n        noink no-animations horizontal-align vertical-align .noLabelFloat=","\n        @click='","'>\n        <mwc-button class='media-dropdown__button' slot='dropdown-trigger'>\n          <div>\n          <span class='media-dropdown__label'>\n            ","\n          </span>\n            <iron-icon class='media-dropdown__icon' .icon=","></iron-icon>\n          </div>\n        </mwc-button>\n        <paper-listbox slot=\"dropdown-content\" class=\"media-dropdown-trigger\">\n          ","\n        </paper-listbox>\n      </paper-menu-button>"]);return h=function(){return a},a}function i(){const a=M(["\n      <div class='tts flex justify'>\n        <paper-input class='tts__input' no-label-float\n          placeholder=","...\n          @click='","'>\n        </paper-input>\n        <div>\n          <mwc-button class='tts_button' @click='","'>\n            SEND\n          </mwc-button>\n        </div>\n      </div>"]);return i=function(){return a},a}function j(){const a=M(["\n      <div class='vol-control--stateless flex'>\n        ","\n        ","\n        ","\n      </div>"]);return j=function(){return a},a}function k(){const a=M(["\n      <div class='vol-control flex'>\n        <div>\n          ","\n        </div>\n        <ha-slider ?disabled=","\n          @change=","\n          @click=","\n          min='0' max="," value=","\n          dir=","\n          ignore-bar-touch pin>\n        </ha-slider>\n      </div>"]);return k=function(){return a},a}function l(){const a=M(["\n      ","\n      ","\n      ",""]);return l=function(){return a},a}function m(){const a=M(["\n      ","\n      <div class='flex shuffle'>\n        ","\n      </div>\n      <div class='flex media-controls'>\n        ","\n      </div>"]);return m=function(){return a},a}function n(){const a=M(["<paper-item value=",">","</paper-item>"]);return n=function(){return a},a}function o(){const a=M(["\n      <paper-menu-button class='source-menu' slot='dropdown-trigger'\n        .horizontalAlign="," .verticalAlign=","\n        .verticalOffset="," .noAnimations=","\n        @click='","'>\n        ","\n        <paper-listbox slot='dropdown-content' selected=","\n          @click='","'>\n          ","\n        </paper-listbox>\n      </paper-menu-button>"]);return o=function(){return a},a}function p(){const a=M(["\n        <mwc-button class='source-menu__button' slot='dropdown-trigger'>\n          <span class='source-menu__source' display=",">\n            ","\n          </span>\n          <iron-icon .icon=","></iron-icon>\n        </mwc-button>"]);return p=function(){return a},a}function q(){const a=M(["<paper-icon-button class='source-menu__button' slot='dropdown-trigger' .icon=","></paper-icon-button>"]);return q=function(){return a},a}function r(){const a=M(["<span>(master)</span>"]);return r=function(){return a},a}function s(){const a=M(["\n      <paper-checkbox\n        ?checked=","\n        ?disabled=","\n        @click='","'>\n        ","\n        ","\n      </paper-checkbox>"]);return s=function(){return a},a}function t(){const a=M(["Leave"]);return t=function(){return a},a}function u(){const a=M(["Ungroup"]);return u=function(){return a},a}function v(){const a=M(["\n      <div class='speaker-select'>\n        <span>Group speakers</span>\n        ","\n        <div class='buttons'>\n          <mwc-button\n            class='speaker-select__button'\n            raised\n            ?disabled=","\n            @click='","'>\n            ","\n          </mwc-button>\n          <mwc-button\n            class='speaker-select__button'\n            raised\n            ?disabled=","\n            @click='","'>\n            Group all\n          </mwc-button>\n        </div>\n      </div>"]);return v=function(){return a},a}function w(){const a=M(["\n      <paper-icon-button class='group-button' .icon=","\n        ?opaque=","\n        ?color=","\n        @click=",">\n      </paper-icon-button>"]);return w=function(){return a},a}function x(){const a=M(["\n      ","\n      <div class='power-row flex'>\n        ","\n        ","\n        ","\n        ","\n      </div>"]);return x=function(){return a},a}function y(){const a=M(["\n      <span class='label'>\n        ","\n      </span>"]);return y=function(){return a},a}function z(){const a=M(["\n      <div class='progress' @click=",">\n        <paper-progress class='transiting' value=","\n          max=",">\n        </paper-progress>\n      </div>"]);return z=function(){return a},a}function A(){const a=M(["<span class=",">","</span>"]);return A=function(){return a},a}function B(){const a=M(["<span class=",">","</span>"]);return B=function(){return a},a}function C(){const a=M(["\n          <div>\n            <div class='marquee'>\n              ","\n            </div>\n          </div>"]);return C=function(){return a},a}function D(){const a=M(["\n      <div class='entity__info__media'\n        ?short=","\n        ?short-scroll="," ?scroll=","\n        style='animation-duration: ","s;'>\n        ","\n        ","\n      </div>"]);return D=function(){return a},a}function E(){const a=M(["\n      <div class='entity__info__name'>\n        "," ","\n      </div>"]);return E=function(){return a},a}function F(){const a=M(["\n      <paper-icon-button .icon="," ?color=","\n        @click='","'>\n      </paper-icon-button>"]);return F=function(){return a},a}function G(){const a=M(["\n      <paper-icon-button class='power-button'\n        .icon=","\n        @click='","'\n        ?color=",">\n      </paper-icon-button>"]);return G=function(){return a},a}function H(){const a=M(["\n      <div class='entity__icon'>\n        <ha-icon\n          icon=","\n          ?color=",">\n        </ha-icon>\n      </div>"]);return H=function(){return a},a}function I(){const a=M(["\n        <div class='entity__artwork' ?border=","\n          style='background-image: ",";'\n          state=",">\n        </div>"]);return I=function(){return a},a}function J(){const a=M(["<div class='cover' style='background-image: ",";'></div>"]);return J=function(){return a},a}function K(){const a=M(["\n      <ha-card break="," ?initial=","\n        ?bg="," ?group=","\n        ?more-info="," ?has-title=","\n        artwork="," ?has-artwork="," state=","\n        ?flow="," ?collapse=","\n        content=","\n        ?rtl=","\n        @click=",">\n        <div class='bg'>\n          ","\n        </div>\n        <header>","</header>\n        <div class='player'>\n          <div class='entity flex' ?inactive=",">\n            ","\n            <div class='entity__info'>\n              ","\n              ","\n            </div>\n            <div class='control-row--top flex'>\n              ","\n            </div>\n          </div>\n          <div class='rows'>\n            <div class='control-row flex'>\n              ","\n            </div>\n            ","\n            ","\n            ","\n            ","\n          </div>\n        </div>\n        ","\n      </ha-card>"]);return K=function(){return a},a}function L(){const a=M(["\n  :host {\n    display: block;\n  }\n  ha-card {\n    --mmp-accent-color: var(--mini-media-player-accent-color, var(--accent-color, #f39c12));\n    cursor: default;\n    display: flex;\n    background: transparent;\n    overflow: hidden;\n    padding: 0;\n    position: relative;\n  }\n  ha-card[group] {\n    box-shadow: none;\n  }\n  ha-card[more-info] {\n    cursor: pointer;\n  }\n  ha-card[collapse] {\n    overflow: visible;\n  }\n  ha-card:before {\n    content: '';\n    padding-top: 0px;\n    transition: padding-top .5s cubic-bezier(.21,.61,.35,1);\n    will-change: padding-top;\n  }\n  ha-card[initial] .entity__artwork,\n  ha-card[initial] .entity__icon {\n    animation-duration: .001s;\n  }\n  ha-card[initial]:before,\n  ha-card[initial] .player {\n    transition: none;\n  }\n  header {\n    display: none;\n  }\n  mwc-button {\n    --mdc-theme-primary: var(--primary-text-color);\n  }\n  mwc-button[raised] {\n    --mdc-theme-on-primary: var(--primary-text-color);\n    --mdc-theme-primary: transparent;\n    background: rgba(255,255,255,.25);\n  }\n  mwc-button[dense] {\n    box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0,0,0,.12);\n  }\n  ha-card[has-title] header {\n    display: block;\n    font-size: var(--paper-font-headline_-_font-size);\n    font-weight: var(--paper-font-headline_-_font-weight);\n    letter-spacing: var(--paper-font-headline_-_letter-spacing);\n    line-height: var(--paper-font-headline_-_line-height);\n    padding: 24px 16px 16px;\n    position: relative;\n  }\n  ha-card[artwork='full-cover'][has-artwork]:before {\n    padding-top: 56%;\n  }\n  ha-card[artwork='full-cover'][has-artwork][content='music']:before,\n  ha-card[artwork='full-cover-fit'][has-artwork]:before {\n    padding-top: 100%;\n  }\n  .bg {\n    background: var(--paper-card-background-color, white);\n    position: absolute;\n    top: 0; right: 0; bottom: 0; left: 0;\n  }\n  ha-card[group] .bg {\n    background: transparent;\n  }\n  .cover,\n  .cover:before {\n    display: block;\n    opacity: 0;\n    position: absolute;\n    top: 0; right: 0; bottom: 0; left: 0;\n    transition: opacity .75s cubic-bezier(.21,.61,.35,1);\n    will-change: opacity;\n  }\n  .cover {\n    animation: fade-in .5s cubic-bezier(.21,.61,.35,1);\n    background-size: cover;\n    background-repeat: no-repeat;\n    background-position: center center;\n  }\n  .cover:before {\n    background: rgba(0,0,0,.5);\n    content: '';\n  }\n  ha-card[artwork*='full-cover'][has-artwork] .player {\n    background: rgba(0,0,0,.75);\n    background: linear-gradient(to top, rgba(0,0,0,.75) 0%, rgba(0,0,0,.5) 50%, transparent 100%);\n  }\n  ha-card[has-artwork] .cover,\n  ha-card[has-artwork][artwork='cover'] .cover:before,\n  ha-card[bg] .cover {\n    opacity: .999;\n  }\n  ha-card[artwork='default'] .cover {\n    display: none;\n  }\n  ha-card[bg] .cover {\n    display: block;\n  }\n  ha-card[artwork='full-cover-fit'][has-artwork] .cover {\n    background-color: black;\n    background-size: contain;\n  }\n  .player {\n    align-self: flex-end;\n    box-sizing: border-box;\n    position: relative;\n    padding: 16px;\n    transition: padding .25s ease-out;\n    width: 100%;\n    will-change: padding;\n  }\n  ha-card[group] .player {\n    padding: 2px 0;\n  }\n  ha-card[has-title] .player {\n    padding-top: 0;\n  }\n  ha-card[artwork*='cover'][has-artwork] paper-icon-button,\n  ha-card[artwork*='cover'][has-artwork] ha-icon,\n  ha-card[artwork*='cover'][has-artwork] .entity__info,\n  ha-card[artwork*='cover'][has-artwork] .entity__info__name,\n  ha-card[artwork*='cover'][has-artwork] mwc-button,\n  ha-card[artwork*='cover'][has-artwork] header,\n  ha-card[artwork*='cover'][has-artwork] .speaker-select > span,\n  ha-card[artwork*='cover'][has-artwork] paper-menu-button mwc-button:focus iron-icon {\n    color: #FFFFFF;\n    border-color: #FFFFFF;\n  }\n  ha-card[artwork*='cover'][has-artwork] ha-slider {\n    --paper-slider-container-color: rgba(255,255,255,.75);\n  }\n  ha-card[artwork*='cover'][has-artwork] mwc-button {\n    --mdc-theme-primary: #FFFFFF;\n    --mdc-theme-on-primary: #FFFFFF;\n  }\n  ha-card[artwork*='cover'][has-artwork] paper-input {\n    --paper-input-container-focus-color: #FFFFFF;\n  }\n  ha-card[artwork*='cover'][has-artwork] paper-checkbox[disabled] {\n    --paper-checkbox-checkmark-color: rgba(0,0,0,.5);\n  }\n  ha-card[artwork*='cover'][has-artwork] paper-checkbox {\n    --paper-checkbox-unchecked-color: #FFFFFF;\n    --paper-checkbox-label-color: #FFFFFF;\n  }\n  ha-card[artwork*='cover'][has-artwork] .media-buttons__button,\n  ha-card[artwork*='cover'][has-artwork] .speaker-select__button {\n    background-color: rgba(255,255,255,.25);\n  }\n  ha-card[artwork*='cover'][has-artwork] mwc-button[raised] {\n    --mdc-theme-primary: transparent;\n    --mdc-theme-on-primary: #FFFFFF;\n  }\n  ha-card[artwork*='cover'][has-artwork] paper-input {\n    --paper-input-container-color: #FFFFFF;\n    --paper-input-container-input-color: #FFFFFF;\n  }\n  .flex {\n    display: flex;\n    display: -ms-flexbox;\n    display: -webkit-flex;\n    flex-direction: row;\n  }\n  .justify {\n    -webkit-justify-content: space-between;\n    justify-content: space-between;\n  }\n  .hidden {\n    display: none;\n  }\n  .entity {\n    position: relative;\n  }\n  .entity__info {\n    justify-content: center;\n    display: flex;\n    flex-direction: column;\n    margin-left: 8px;\n    position: relative;\n    overflow: hidden;\n    user-select: none;\n  }\n  ha-card[rtl] .entity__info {\n    margin-left: auto;\n    margin-right: 8px;\n  }\n  .rows {\n    margin-left: 56px;\n    position: relative;\n  }\n  ha-card[rtl] .rows {\n    margin-left: auto;\n    margin-right: 56px;\n  }\n  .rows > *:nth-child(2) {\n    margin-top: 0px;\n  }\n  .entity__info__media[short] {\n    max-height: 20px;\n    overflow: hidden;\n  }\n  ha-card[content='movie'] .attr__media_season,\n  ha-card[content='movie'] .attr__media_episode {\n    display: none;\n  }\n  .entity__icon {\n    color: var(--paper-item-icon-color, #44739e);\n  }\n  .entity__artwork, .entity__icon {\n    animation: fade-in .25s ease-out;\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-size: cover;\n    border-radius: 100%;\n    height: 40px;\n    line-height: 40px;\n    margin-right: 8px;\n    min-width: 40px;\n    position: relative;\n    text-align: center;\n    width: 40px;\n    will-change: border-color;\n    transition: border-color .25s ease-out;\n  }\n  ha-card[rtl] .entity__artwork, ha-card[rtl] .entity__icon {\n    margin-right: auto;\n    margin-left: 8px;\n  }\n  .entity__artwork[border] {\n    border: 2px solid var(--primary-text-color);\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n  }\n  .entity__artwork[state='playing'] {\n    border-color: var(--mmp-accent-color);\n  }\n  .entity__info__name,\n  .entity__info__media[short],\n  .source-menu__source,\n  .media-dropdown__label,\n  .media-label,\n  .label {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  .entity__info__name {\n    line-height: 20px;\n  }\n  .control-row--top {\n    line-height: 40px;\n    max-height: 40px;\n  }\n  .entity[inactive] .entity__info__media,\n  .entity__info__name,\n  paper-icon-button,\n  mwc-button {\n    color: var(--primary-text-color);\n    position: relative;\n  }\n  .entity__info__media {\n    color: var(--secondary-text-color);\n    max-height: 6em;\n    word-break: break-word;\n  }\n  .attr__app_name {\n    display: none;\n  }\n  .attr__app_name:first-child,\n  .attr__app_name:first-of-type {\n    display: inline;\n  }\n  .entity[inactive] .entity__info__media {\n    opacity: .5;\n  }\n  .entity[inactive] .entity__info__media {\n    max-width: 200px;\n  }\n  .entity__info__media[short-scroll] {\n    max-height: 20px;\n    white-space: nowrap;\n  }\n  .entity__info__media[scroll] > span {\n    visibility: hidden;\n  }\n  .entity__info__media[scroll] > div {\n    animation: move linear infinite;\n  }\n  .entity__info__media[scroll] .marquee {\n    animation: slide linear infinite;\n  }\n  .entity__info__media[scroll] .marquee,\n  .entity__info__media[scroll] > div {\n    animation-duration: inherit;\n    visibility: visible;\n  }\n  .entity__info__media[scroll] {\n    animation-duration: 10s;\n    mask-image: linear-gradient(to right, transparent 0%, black 5%, black 95%, transparent 100%);\n    -webkit-mask-image: linear-gradient(to right, transparent 0%, black 5%, black 95%, transparent 100%);\n  }\n  .marquee {\n    visibility: hidden;\n    position: absolute;\n    white-space: nowrap;\n  }\n  paper-icon-button[color],\n  ha-icon[color] {\n    color: var(--mmp-accent-color) !important;\n  }\n  ha-card[artwork*='cover'][has-artwork] .entity__info__media {\n    color: var(--mini-media-player-media-cover-info-color, #FFFFFF);\n  }\n  paper-icon-button {\n    transition: color .15s ease-in-out;\n    will-change: color;\n  }\n  .entity__info__media span:before {\n    content: ' - ';\n  }\n  .entity__info__media span:first-of-type:before {\n    content: '';\n  }\n  .entity__info__media span:empty,\n  .source-menu span:empty {\n    display: none;\n  }\n  .tts {\n    align-items: center;\n    margin-top: 8px;\n  }\n  .tts__input {\n    cursor: text;\n    flex: 1;\n    margin-right: 8px;\n    --paper-input-container-input: {\n      font-size: 1em;\n    };\n  }\n  ha-card[rtl] .tts__input {\n    margin-right: auto;\n    margin-left: 8px;\n  }\n  .tts__button {\n    margin: 0;\n    padding: .4em;\n  }\n  .media-dropdown {\n    box-sizing: border-box;\n    width: 100%;\n    padding: 8px 8px 0 0;\n  }\n  .media-dropdown__button {\n    display: flex;\n    font-size: 1em;\n    justify-content: space-between;\n    margin: 0;\n    border-bottom: 1px solid var(--primary-text-color);\n    opacity: .8;\n  }\n  .media-dropdown__button > div {\n    display: flex;\n    flex: 1;\n    justify-content: space-between;\n    align-items: center;\n  }\n  .media-dropdown__label {\n    padding: .2em .2em .2em 0;\n    text-align: left;\n    text-transform: none;\n  }\n  .media-dropdown__icon {\n    height: 24px;\n    width: 24px;\n  }\n  .media-buttons {\n    box-sizing: border-box;\n    display: flex;\n    flex-wrap: wrap;\n    margin-top: 8px;\n  }\n  .media-buttons__button {\n    background-color: rgba(255,255,255,.1);\n    box-sizing: border-box;\n    margin: 8px 8px 0 0;\n    min-width: 0;\n    min-width: calc(50% - 8px);\n    flex: 1;\n    overflow: hidden;\n  }\n  .media-buttons__button[columns='0'] {\n    min-width: calc(100% - 8px);\n  }\n  .media-buttons__button[columns='3'] {\n    min-width: calc(33.33% - 8px);\n  }\n  .media-buttons__button[columns='4'] {\n    min-width: calc(25% - 8px);\n  }\n  .media-buttons__button > span {\n    line-height: 24px;\n    text-transform: initial;\n  }\n  .media-buttons__button > *:nth-child(2),\n  .media-dropdown paper-item > *:nth-child(2) {\n    margin-left: 4px;\n  }\n  ha-card[rtl] .media-buttons__button > *:nth-child(2),\n  ha-card[rtl] .media-dropdown paper-item > *:nth-child(2) {\n    margin-left: auto;\n    margin-right: 4px;\n  }\n  .control-row--top .vol-control {\n    max-width: 200px;\n  }\n  .control-row--top {\n    flex: 1;\n    justify-content: flex-end;\n    margin-right: 0;\n    margin-left: auto;\n    width: auto;\n    max-width: 100%;\n  }\n  ha-card[rtl] .control-row--top {\n    margin-right: auto;\n    margin-left: 0;\n  }\n  .control-row--top ha-slider {\n    flex: 1;\n    height: 40px;\n    line-height: initial;\n  }\n  .control-row {\n    flex-wrap: wrap;\n    justify-content: center;\n  }\n  .control-row > .flex {\n    flex: 1;\n    justify-content: space-between;\n  }\n  .control-row > .shuffle {\n    flex: 3;\n    flex-shrink: 200;\n    justify-content: center;\n  }\n  .control-row > .vol-control {\n    flex: 100;\n  }\n  .vol-control {\n    flex: 1;\n    max-height: 40px;\n  }\n  .group-button {\n    height: 85%;\n    margin: auto;\n  }\n  .speaker-select {\n    display: flex;\n    flex-direction: column;\n  }\n  .speaker-select > span {\n    font-weight: 500;\n    margin-top: 12px;\n    text-transform: uppercase;\n  }\n  .speaker-select paper-checkbox {\n    padding: 8px 0;\n  }\n  .speaker-select .buttons {\n    display: flex;\n  }\n  .speaker-select__button {\n    background-color: rgba(255,255,255,.1);\n    margin: 8px 8px 0 0;\n    min-width: 0;\n    text-transform: uppercase;\n    text-align: center;\n    width: 50%;\n  }\n  .speaker-select > paper-checkbox > span {\n    font-weight: 600;\n  }\n  ha-slider {\n    max-width: none;\n    min-width: 100px;\n    width: 100%;\n  }\n  paper-input {\n    opacity: .75;\n    --paper-input-container-color: var(--primary-text-color);\n    --paper-input-container-focus-color: var(--primary-text-color);\n    --paper-input-container: {\n      padding: 0;\n    };\n  }\n  .source-menu {\n    display: flex;\n    align-items: center;\n    height: 40px;\n    line-height: 20px;\n    padding: 0;\n  }\n  paper-menu-button[focused] mwc-button > iron-icon,\n  paper-menu-button[focused] mwc-button > div > iron-icon,\n  paper-menu-button[focused] paper-icon-button,\n  ha-card[artwork*='cover'][has-artwork] paper-menu-button[focused] paper-icon-button {\n    color: var(--mmp-accent-color);\n    transform: rotate(180deg);\n  }\n  paper-menu-button mwc-button:focus iron-icon,\n  paper-menu-button mwc-button:focus > div iron-icon,\n  paper-menu-button mwc-button[focused] iron-icon,\n  paper-menu-button[focused] paper-icon-button[focused],\n  ha-card[artwork*='cover'][has-artwork] paper-menu-button[focused] paper-icon-button[focused] {\n    color: var(--primary-text-color);\n    transform: rotate(0deg);\n  }\n  ha-card[has-artwork][artwork*='cover'] paper-menu-button[focused] paper-icon-button[focused] {\n    color: #FFFFFF;\n  }\n  .source-menu__button {\n    height: 36px;\n    line-height: 20px;\n    margin: 0;\n    min-width: 0;\n  }\n  .source-menu__source {\n    display: block;\n    max-width: 60px;\n    position: relative;\n    width: auto;\n    text-transform: initial;\n  }\n  .source-menu__source[display=\"icon\"] {\n    display: none;\n  }\n  .source-menu__source[display=\"full\"] {\n    max-width: none;\n  }\n  .progress {\n    height: 12px;\n    cursor: pointer;\n    left: 0; right: 0; bottom: 0;\n    position: absolute;\n  }\n  ha-card[group][collapse] .progress {\n    bottom: -2px;\n    height: 5px;\n  }\n  ha-card[group] paper-progress {\n    height: var(--paper-progress-height, 2px);\n  }\n  paper-progress {\n    height: var(--paper-progress-height, 4px);\n    bottom: 0;\n    position: absolute;\n    width: 100%;\n    --paper-progress-active-color: var(--mmp-accent-color);\n    --paper-progress-container-color: rgba(100,100,100,.15);\n    --paper-progress-transition-duration: 1s;\n    --paper-progress-transition-timing-function: linear;\n    --paper-progress-transition-delay: 0s;\n  }\n  ha-card[state='paused'] paper-progress {\n    --paper-progress-active-color: var(--disabled-text-color, rgba(150,150,150,.5));\n  }\n  .label {\n    margin: 0 8px;\n  }\n  .media-dropdown[focused] mwc-button,\n  paper-icon-button[color][opaque],\n  paper-input[focused] {\n    opacity: 1;\n  }\n  .media-dropdown[focused] mwc-button:focus {\n    opacity: .75;\n  }\n  paper-icon-button[opaque],\n  .speaker-select mwc-button[disabled] {\n    opacity: .5;\n  }\n  ha-card[flow] .control-row--top {\n    justify-content: space-between;\n  }\n  ha-card[flow] .power-row {\n    margin-left: auto;\n  }\n  ha-card[flow][rtl] .power-row {\n    margin-right: auto;\n  }\n  ha-card[flow] .entity__info {\n    display: none;\n  }\n  ha-card[flow] ha-slider,\n  ha-card[flow] .vol-control {\n    width: 100%;\n    max-width: none;\n  }\n  ha-card[break*=\"break\"] .rows {\n    margin-left: 0;\n  }\n  ha-card[break*=\"break\"][rtl] .rows {\n    margin-right: 0;\n  }\n  ha-card[break*=\"break\"] .rows > * {\n    padding-left: 8px;\n  }\n  ha-card[break*=\"break\"][rtl] .rows > * {\n    padding-right: 8px;\n  }\n  ha-card[break*=\"break\"] .rows > .control-row {\n    padding: 0;\n  }\n  ha-card[break*=\"break\"] .media-dropdown__button {\n    padding-right: 0;\n  }\n  ha-card[break*=\"break\"][rtl] .media-dropdown__button {\n    padding-left: 0;\n  }\n  .player div:empty,\n  ha-card[break=\"break-width\"] .source-menu__source,\n  .entity[inactive] .source-menu__source {\n    display: none;\n  }\n  @keyframes slide {\n    100% { transform: translateX(-100%); }\n  }\n  @keyframes move {\n    from { transform: translateX(100%); }\n    to { transform: translateX(0); }\n  }\n  @keyframes fade-in {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n  .media-controls {\n    direction: ltr;\n  }"]);return L=function(){return a},a}function M(a,b){return b||(b=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))}function N(a){for(var b=1;b<arguments.length;b++){var c=null==arguments[b]?{}:arguments[b],d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){O(a,b,c[b])})}return a}function O(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b():"function"==typeof define&&define.amd?define(b):b()})(this,function(){function M(a){let b=Aa.get(a.type);void 0===b&&(b={stringsArray:new WeakMap,keyString:new Map},Aa.set(a.type,b));let c=b.stringsArray.get(a.strings);if(void 0!==c)return c;const d=a.strings.join(fa);return c=b.keyString.get(d),void 0===c&&(c=new ja(a,a.getTemplateElement()),b.keyString.set(d,c)),b.stringsArray.set(a.strings,c),c}function O(a,b){const c=a.element.content,d=a.parts,e=document.createTreeWalker(c,Ea,null,!1);let f=Ga(d),g=d[f],h=-1,i=0;const j=[];for(let c=null;e.nextNode();){h++;const a=e.currentNode;for(a.previousSibling===c&&(c=null),b.has(a)&&(j.push(a),null===c&&(c=a)),null!==c&&i++;g!==void 0&&g.index===h;)g.index=null===c?g.index-i:-1,f=Ga(d,f),g=d[f]}j.forEach(a=>a.parentNode.removeChild(a))}function P(a,b){let c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;const d=a.element.content,e=a.parts;if(null===c||void 0===c)return void d.appendChild(b);const f=document.createTreeWalker(d,Ea,null,!1);let g=Ga(e),h=0,i=-1;for(;f.nextNode();){i++;const a=f.currentNode;for(a===c&&(h=Fa(b),c.parentNode.insertBefore(b,c));-1!==g&&e[g].index===i;){if(0<h){for(;-1!==g;)e[g].index+=h,g=Ga(e,g);return}g=Ga(e,g)}}}function Q(a){let b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[];for(let c=0,d=a.length;c<d;c++){const d=a[c];Array.isArray(d)?Q(d,b):b.push(d)}return b}function R(a,b){function c(){f&&(f=!1,a()),g&&e()}function d(){gb(c)}function e(){var a=Date.now();if(f){if(a-h<2)return;g=!0}else f=!0,g=!1,setTimeout(d,b);h=a}var f=!1,g=!1,h=0;return e}function S(a){return parseFloat(a)||0}function T(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return b.reduce(function(b,c){var d=a["border-"+c+"-width"];return b+S(d)},0)}function U(a){for(var b=["top","right","bottom","left"],c={},d=0,e=b;d<e.length;d++){var f=e[d],g=a["padding-"+f];c[f]=S(g)}return c}function V(a){var b=a.getBBox();return $(0,0,b.width,b.height)}function W(a){var b=Math.abs,c=Math.round,d=a.clientWidth,e=a.clientHeight;if(!d&&!e)return mb;var f=lb(a).getComputedStyle(a),g=U(f),h=g.left+g.right,i=g.top+g.bottom,j=S(f.width),k=S(f.height);if("border-box"===f.boxSizing&&(c(j+h)!==d&&(j-=T(f,"left","right")+h),c(k+i)!==e&&(k-=T(f,"top","bottom")+i)),!X(a)){var l=c(j+h)-d,m=c(k+i)-e;1!==b(l)&&(j-=l),1!==b(m)&&(k-=m)}return $(g.left,g.top,j,k)}function X(a){return a===lb(a).document.documentElement}function Y(a){return eb?nb(a)?V(a):W(a):mb}function Z(a){var b=a.x,c=a.y,d=a.width,e=a.height,f="undefined"==typeof DOMRectReadOnly?Object:DOMRectReadOnly,g=Object.create(f.prototype);return kb(g,{x:b,y:c,width:d,height:e,top:c,right:b+d,bottom:e+c,left:b}),g}function $(a,b,c,d){return{x:a,y:b,width:c,height:d}}const _=new WeakMap,aa=a=>"function"==typeof a&&_.has(a),ba=window.customElements!==void 0&&window.customElements.polyfillWrapFlushCallback!==void 0,ca=function(a,b){let c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,d=b;for(;d!==c;){const b=d.nextSibling;a.removeChild(d),d=b}},da={},ea={},fa="{{lit-".concat((Math.random()+"").slice(2),"}}"),ga="<!--".concat(fa,"-->"),ha=new RegExp("".concat(fa,"|").concat(ga)),ia="$lit$";class ja{constructor(a,b){this.parts=[],this.element=b;let c=-1,d=0;const e=[],f=b=>{const g=b.content,h=document.createTreeWalker(g,133,null,!1);for(let g=0;h.nextNode();){c++;const b=h.currentNode;if(1===b.nodeType){if(b.hasAttributes()){const e=b.attributes;let f=0;for(let a=0;a<e.length;a++)0<=e[a].value.indexOf(fa)&&f++;for(;0<f--;){const e=a.strings[d],f=ma.exec(e)[2],g=f.toLowerCase()+ia,h=b.getAttribute(g),i=h.split(ha);this.parts.push({type:"attribute",index:c,name:f,strings:i}),b.removeAttribute(g),d+=i.length-1}}"TEMPLATE"===b.tagName&&f(b)}else if(3===b.nodeType){const a=b.data;if(0<=a.indexOf(fa)){const f=b.parentNode,g=a.split(ha),h=g.length-1;for(let a=0;a<h;a++)f.insertBefore(""===g[a]?la():document.createTextNode(g[a]),b),this.parts.push({type:"node",index:++c});""===g[h]?(f.insertBefore(la(),b),e.push(b)):b.data=g[h],d+=h}}else if(8===b.nodeType)if(b.data===fa){const a=b.parentNode;(null===b.previousSibling||c===g)&&(c++,a.insertBefore(la(),b)),g=c,this.parts.push({type:"node",index:c}),null===b.nextSibling?b.data="":(e.push(b),c--),d++}else for(let a=-1;-1!==(a=b.data.indexOf(fa,a+1));)this.parts.push({type:"node",index:-1})}};f(b);for(const c of e)c.parentNode.removeChild(c)}}const ka=a=>-1!==a.index,la=()=>document.createComment(""),ma=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class na{constructor(a,b,c){this._parts=[],this.template=a,this.processor=b,this.options=c}update(a){let b=0;for(const c of this._parts)void 0!==c&&c.setValue(a[b]),b++;for(const b of this._parts)void 0!==b&&b.commit()}_clone(){const a=ba?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),b=this.template.parts;let c=0,d=0;const e=a=>{const f=document.createTreeWalker(a,133,null,!1);for(let g=f.nextNode();c<b.length&&null!==g;){const a=b[c];if(!ka(a))this._parts.push(void 0),c++;else if(d===a.index){if("node"===a.type){const a=this.processor.handleTextExpression(this.options);a.insertAfterNode(g.previousSibling),this._parts.push(a)}else this._parts.push(...this.processor.handleAttributeExpressions(g,a.name,a.strings,this.options));c++}else d++,"TEMPLATE"===g.nodeName&&e(g.content),g=f.nextNode()}};return e(a),ba&&(document.adoptNode(a),customElements.upgrade(a)),a}}class oa{constructor(a,b,c,d){this.strings=a,this.values=b,this.type=c,this.processor=d}getHTML(){const a=this.strings.length-1;let b="";for(let c=0;c<a;c++){const a=this.strings[c],d=ma.exec(a);b+=d?a.substr(0,d.index)+d[1]+d[2]+ia+d[3]+fa:a+ga}return b+this.strings[a]}getTemplateElement(){const a=document.createElement("template");return a.innerHTML=this.getHTML(),a}}const pa=a=>null===a||"object"!=typeof a&&"function"!=typeof a;class qa{constructor(a,b,c){this.dirty=!0,this.element=a,this.name=b,this.strings=c,this.parts=[];for(let d=0;d<c.length-1;d++)this.parts[d]=this._createPart()}_createPart(){return new ra(this)}_getValue(){const a=this.strings,b=a.length-1;let c="";for(let d=0;d<b;d++){c+=a[d];const b=this.parts[d];if(void 0!==b){const a=b.value;if(null!=a&&(Array.isArray(a)||"string"!=typeof a&&a[Symbol.iterator]))for(const b of a)c+="string"==typeof b?b:b+"";else c+="string"==typeof a?a:a+""}}return c+=a[b],c}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class ra{constructor(a){this.value=void 0,this.committer=a}setValue(a){a===da||pa(a)&&a===this.value||(this.value=a,!aa(a)&&(this.committer.dirty=!0))}commit(){for(;aa(this.value);){const a=this.value;this.value=da,a(this)}this.value===da||this.committer.commit()}}class sa{constructor(a){this.value=void 0,this._pendingValue=void 0,this.options=a}appendInto(a){this.startNode=a.appendChild(la()),this.endNode=a.appendChild(la())}insertAfterNode(a){this.startNode=a,this.endNode=a.nextSibling}appendIntoPart(a){a._insert(this.startNode=la()),a._insert(this.endNode=la())}insertAfterPart(a){a._insert(this.startNode=la()),this.endNode=a.endNode,a.endNode=this.startNode}setValue(a){this._pendingValue=a}commit(){for(;aa(this._pendingValue);){const a=this._pendingValue;this._pendingValue=da,a(this)}const a=this._pendingValue;a===da||(pa(a)?a!==this.value&&this._commitText(a):a instanceof oa?this._commitTemplateResult(a):a instanceof Node?this._commitNode(a):Array.isArray(a)||a[Symbol.iterator]?this._commitIterable(a):a===ea?(this.value=ea,this.clear()):this._commitText(a))}_insert(a){this.endNode.parentNode.insertBefore(a,this.endNode)}_commitNode(a){this.value===a||(this.clear(),this._insert(a),this.value=a)}_commitText(a){const b=this.startNode.nextSibling;a=null==a?"":a,b===this.endNode.previousSibling&&3===b.nodeType?b.data=a:this._commitNode(document.createTextNode("string"==typeof a?a:a+"")),this.value=a}_commitTemplateResult(a){const b=this.options.templateFactory(a);if(this.value instanceof na&&this.value.template===b)this.value.update(a.values);else{const c=new na(b,a.processor,this.options),d=c._clone();c.update(a.values),this._commitNode(d),this.value=c}}_commitIterable(a){Array.isArray(this.value)||(this.value=[],this.clear());const b=this.value;let c,d=0;for(const e of a)c=b[d],void 0===c&&(c=new sa(this.options),b.push(c),0==d?c.appendIntoPart(this):c.insertAfterPart(b[d-1])),c.setValue(e),c.commit(),d++;d<b.length&&(b.length=d,this.clear(c&&c.endNode))}clear(){let a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.startNode;ca(this.startNode.parentNode,a.nextSibling,this.endNode)}}class ta{constructor(a,b,c){if(this.value=void 0,this._pendingValue=void 0,2!==c.length||""!==c[0]||""!==c[1])throw new Error("Boolean attributes can only contain a single expression");this.element=a,this.name=b,this.strings=c}setValue(a){this._pendingValue=a}commit(){for(;aa(this._pendingValue);){const a=this._pendingValue;this._pendingValue=da,a(this)}if(this._pendingValue!==da){const a=!!this._pendingValue;this.value!==a&&(a?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)),this.value=a,this._pendingValue=da}}}class ua extends qa{constructor(a,b,c){super(a,b,c),this.single=2===c.length&&""===c[0]&&""===c[1]}_createPart(){return new va(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class va extends ra{}let wa=!1;try{const a={get capture(){return wa=!0,!1}};window.addEventListener("test",a,a),window.removeEventListener("test",a,a)}catch(a){}class xa{constructor(a,b,c){this.value=void 0,this._pendingValue=void 0,this.element=a,this.eventName=b,this.eventContext=c,this._boundHandleEvent=a=>this.handleEvent(a)}setValue(a){this._pendingValue=a}commit(){for(;aa(this._pendingValue);){const a=this._pendingValue;this._pendingValue=da,a(this)}if(this._pendingValue===da)return;const a=this._pendingValue,b=this.value,c=null==a||null!=b&&(a.capture!==b.capture||a.once!==b.once||a.passive!==b.passive);c&&this.element.removeEventListener(this.eventName,this._boundHandleEvent,this._options),null!=a&&(null==b||c)&&(this._options=ya(a),this.element.addEventListener(this.eventName,this._boundHandleEvent,this._options)),this.value=a,this._pendingValue=da}handleEvent(a){"function"==typeof this.value?this.value.call(this.eventContext||this.element,a):this.value.handleEvent(a)}}const ya=a=>a&&(wa?{capture:a.capture,passive:a.passive,once:a.once}:a.capture);const za=new class{handleAttributeExpressions(a,b,c,d){const e=b[0];if("."===e){const d=new ua(a,b.slice(1),c);return d.parts}if("@"===e)return[new xa(a,b.slice(1),d.eventContext)];if("?"===e)return[new ta(a,b.slice(1),c)];const f=new qa(a,b,c);return f.parts}handleTextExpression(a){return new sa(a)}},Aa=new Map,Ba=new WeakMap,Ca=(a,b,c)=>{let d=Ba.get(b);d===void 0&&(ca(b,b.firstChild),Ba.set(b,d=new sa(Object.assign({templateFactory:M},c))),d.appendInto(b)),d.setValue(a),d.commit()};(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.0.0");const Da=function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return new oa(a,c,"html",za)},Ea=133,Fa=a=>{let b=11===a.nodeType?0:1;for(const c=document.createTreeWalker(a,Ea,null,!1);c.nextNode();)b++;return b},Ga=function(a){let b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:-1;for(let c=b+1;c<a.length;c++){const b=a[c];if(ka(b))return c}return-1},Ha=(a,b)=>"".concat(a,"--").concat(b);let Ia=!0;"undefined"==typeof window.ShadyCSS?Ia=!1:"undefined"==typeof window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected.Please update to at least @webcomponents/webcomponentsjs@2.0.2 and@webcomponents/shadycss@1.3.1."),Ia=!1);const Ja=a=>b=>{const c=Ha(b.type,a);let d=Aa.get(c);void 0===d&&(d={stringsArray:new WeakMap,keyString:new Map},Aa.set(c,d));let e=d.stringsArray.get(b.strings);if(void 0!==e)return e;const f=b.strings.join(fa);if(e=d.keyString.get(f),void 0===e){const c=b.getTemplateElement();Ia&&window.ShadyCSS.prepareTemplateDom(c,a),e=new ja(b,c),d.keyString.set(f,e)}return d.stringsArray.set(b.strings,e),e},Ka=["html","svg"],La=a=>{Ka.forEach(b=>{const c=Aa.get(Ha(b,a));c!==void 0&&c.keyString.forEach(a=>{const b=a.element.content,c=new Set;Array.from(b.querySelectorAll("style")).forEach(a=>{c.add(a)}),O(a,c)})})},Ma=new Set,Na=(a,b,c)=>{Ma.add(c);const d=a.querySelectorAll("style");if(0===d.length)return void window.ShadyCSS.prepareTemplateStyles(b.element,c);const e=document.createElement("style");for(let f=0;f<d.length;f++){const a=d[f];a.parentNode.removeChild(a),e.textContent+=a.textContent}if(La(c),P(b,e,b.element.content.firstChild),window.ShadyCSS.prepareTemplateStyles(b.element,c),window.ShadyCSS.nativeShadow){const c=b.element.content.querySelector("style");a.insertBefore(c.cloneNode(!0),a.firstChild)}else{b.element.content.insertBefore(e,b.element.content.firstChild);const a=new Set;a.add(e),O(b,a)}},Oa=(a,b,c)=>{const d=c.scopeName,e=Ba.has(b),f=b instanceof ShadowRoot&&Ia&&a instanceof oa,g=f&&!Ma.has(d),h=g?document.createDocumentFragment():b;if(Ca(a,h,Object.assign({templateFactory:Ja(d)},c)),g){const a=Ba.get(h);Ba.delete(h),a.value instanceof na&&Na(h,a.value.template,d),ca(b,b.firstChild),b.appendChild(h),Ba.set(b,a)}!e&&f&&window.ShadyCSS.styleElement(b.host)};window.JSCompiler_renameProperty=a=>a;const Pa={toAttribute(a,b){return b===Boolean?a?"":null:b===Object||b===Array?null==a?a:JSON.stringify(a):a},fromAttribute(a,b){return b===Boolean?null!==a:b===Number?null===a?null:+a:b===Object||b===Array?JSON.parse(a):a}},Qa=(a,b)=>b!==a&&(b===b||a===a),Ra={attribute:!0,type:String,converter:Pa,reflect:!1,hasChanged:Qa},Sa=Promise.resolve(!0),Ta=1,Ua=4,Va=8,Wa=16,Xa=32;class Ya extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=Sa,this._hasConnectedResolver=void 0,this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();const a=[];return this._classProperties.forEach((b,c)=>{const d=this._attributeNameForProperty(c,b);void 0!==d&&(this._attributeToPropertyMap.set(d,c),a.push(d))}),a}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const a=Object.getPrototypeOf(this)._classProperties;a!==void 0&&a.forEach((a,b)=>this._classProperties.set(b,a))}}static createProperty(a){let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ra;if(this._ensureClassProperties(),this._classProperties.set(a,b),b.noAccessor||this.prototype.hasOwnProperty(a))return;const c="symbol"==typeof a?Symbol():"__".concat(a);Object.defineProperty(this.prototype,a,{get(){return this[c]},set(b){const d=this[a];this[c]=b,this._requestUpdate(a,d)},configurable:!0,enumerable:!0})}static finalize(){if(!(this.hasOwnProperty(JSCompiler_renameProperty("finalized",this))&&this.finalized)){const a=Object.getPrototypeOf(this);if("function"==typeof a.finalize&&a.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const a=this.properties,b=[...Object.getOwnPropertyNames(a),...("function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(a):[])];for(const c of b)this.createProperty(c,a[c])}}}static _attributeNameForProperty(a,b){const c=b.attribute;return!1===c?void 0:"string"==typeof c?c:"string"==typeof a?a.toLowerCase():void 0}static _valueHasChanged(a,b){let c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:Qa;return c(a,b)}static _propertyValueFromAttribute(a,b){const c=b.type,d=b.converter||Pa,e="function"==typeof d?d:d.fromAttribute;return e?e(a,c):a}static _propertyValueToAttribute(a,b){if(void 0===b.reflect)return;const c=b.type,d=b.converter,e=d&&d.toAttribute||Pa.toAttribute;return e(a,c)}initialize(){this._saveInstanceProperties(),this._requestUpdate()}_saveInstanceProperties(){this.constructor._classProperties.forEach((a,b)=>{if(this.hasOwnProperty(b)){const a=this[b];delete this[b],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(b,a)}})}_applyInstanceProperties(){this._instanceProperties.forEach((a,b)=>this[b]=a),this._instanceProperties=void 0}connectedCallback(){this._updateState|=Xa,this._hasConnectedResolver&&(this._hasConnectedResolver(),this._hasConnectedResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(a,b,c){b!==c&&this._attributeToProperty(a,c)}_propertyToAttribute(a,b){let c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:Ra;const d=this.constructor,e=d._attributeNameForProperty(a,c);if(e!==void 0){const a=d._propertyValueToAttribute(b,c);if(a===void 0)return;this._updateState|=Va,null==a?this.removeAttribute(e):this.setAttribute(e,a),this._updateState&=~Va}}_attributeToProperty(a,b){if(this._updateState&Va)return;const c=this.constructor,d=c._attributeToPropertyMap.get(a);if(d!==void 0){const a=c._classProperties.get(d)||Ra;this._updateState|=Wa,this[d]=c._propertyValueFromAttribute(b,a),this._updateState&=~Wa}}_requestUpdate(a,b){let c=!0;if(a!==void 0){const d=this.constructor,e=d._classProperties.get(a)||Ra;d._valueHasChanged(this[a],b,e.hasChanged)?(!this._changedProperties.has(a)&&this._changedProperties.set(a,b),!0===e.reflect&&!(this._updateState&Wa)&&(this._reflectingProperties===void 0&&(this._reflectingProperties=new Map),this._reflectingProperties.set(a,e))):c=!1}!this._hasRequestedUpdate&&c&&this._enqueueUpdate()}requestUpdate(a,b){return this._requestUpdate(a,b),this.updateComplete}async _enqueueUpdate(){this._updateState|=Ua;let a,b;const c=this._updatePromise;this._updatePromise=new Promise((c,d)=>{a=c,b=d});try{await c}catch(a){}this._hasConnected||(await new Promise(a=>this._hasConnectedResolver=a));try{const a=this.performUpdate();null!=a&&(await a)}catch(a){b(a)}a(!this._hasRequestedUpdate)}get _hasConnected(){return this._updateState&Xa}get _hasRequestedUpdate(){return this._updateState&Ua}get hasUpdated(){return this._updateState&Ta}performUpdate(){this._instanceProperties&&this._applyInstanceProperties();let a=!1;const b=this._changedProperties;try{a=this.shouldUpdate(b),a&&this.update(b)}catch(b){throw a=!1,b}finally{this._markUpdated()}a&&(!(this._updateState&Ta)&&(this._updateState|=Ta,this.firstUpdated(b)),this.updated(b))}_markUpdated(){this._changedProperties=new Map,this._updateState&=~Ua}get updateComplete(){return this._updatePromise}shouldUpdate(a){return!0}update(a){this._reflectingProperties!==void 0&&0<this._reflectingProperties.size&&(this._reflectingProperties.forEach((a,b)=>this._propertyToAttribute(b,this[b],a)),this._reflectingProperties=void 0)}updated(a){}firstUpdated(a){}}Ya.finalized=!0;const Za="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,$a=Symbol();class _a{constructor(a,b){if(b!==$a)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=a}get styleSheet(){return void 0===this._styleSheet&&(Za?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const ab=a=>{if(a instanceof _a)return a.cssText;throw new Error("Value passed to 'css' function must be a 'css' function result: ".concat(a,". Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security."))};(window.litElementVersions||(window.litElementVersions=[])).push("2.0.1");const bb=a=>a.flat?a.flat(1/0):Q(a);class cb extends Ya{static finalize(){super.finalize(),this._styles=this.hasOwnProperty(JSCompiler_renameProperty("styles",this))?this._getUniqueStyles():this._styles||[]}static _getUniqueStyles(){const a=this.styles,b=[];if(Array.isArray(a)){const c=bb(a),d=c.reduceRight((a,b)=>(a.add(b),a),new Set);d.forEach(a=>b.unshift(a))}else a&&b.push(a);return b}initialize(){super.initialize(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const a=this.constructor._styles;0===a.length||(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow?Za?this.renderRoot.adoptedStyleSheets=a.map(a=>a.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(a.map(a=>a.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&window.ShadyCSS!==void 0&&window.ShadyCSS.styleElement(this)}update(a){super.update(a);const b=this.render();b instanceof oa&&this.constructor.render(b,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(a=>{const b=document.createElement("style");b.textContent=a.cssText,this.renderRoot.appendChild(b)}))}render(){}}cb.finalized=!0,cb.render=Oa;var db=function(){function a(a,b){var c=-1;return a.some(function(a,d){return a[0]===b&&(c=d,!0)}),c}return"undefined"==typeof Map?function(){function b(){this.__entries__=[]}return Object.defineProperty(b.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),b.prototype.get=function(b){var c=a(this.__entries__,b),d=this.__entries__[c];return d&&d[1]},b.prototype.set=function(b,c){var d=a(this.__entries__,b);~d?this.__entries__[d][1]=c:this.__entries__.push([b,c])},b.prototype.delete=function(b){var c=this.__entries__,d=a(c,b);~d&&c.splice(d,1)},b.prototype.has=function(b){return!!~a(this.__entries__,b)},b.prototype.clear=function(){this.__entries__.splice(0)},b.prototype.forEach=function(a,b){void 0===b&&(b=null);for(var c,d=0,e=this.__entries__;d<e.length;d++)c=e[d],a.call(b,c[1],c[0])},b}():Map}(),eb="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,fb=function(){return"undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")()}(),gb=function(){return"function"==typeof requestAnimationFrame?requestAnimationFrame.bind(fb):function(a){return setTimeout(function(){return a(Date.now())},1e3/60)}}(),hb=["top","right","bottom","left","width","height","size","weight"],ib="undefined"!=typeof MutationObserver,jb=function(){function a(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=R(this.refresh.bind(this),20)}return a.prototype.addObserver=function(a){~this.observers_.indexOf(a)||this.observers_.push(a),this.connected_||this.connect_()},a.prototype.removeObserver=function(a){var b=this.observers_,c=b.indexOf(a);~c&&b.splice(c,1),!b.length&&this.connected_&&this.disconnect_()},a.prototype.refresh=function(){var a=this.updateObservers_();a&&this.refresh()},a.prototype.updateObservers_=function(){var a=this.observers_.filter(function(a){return a.gatherActive(),a.hasActive()});return a.forEach(function(a){return a.broadcastActive()}),0<a.length},a.prototype.connect_=function(){!eb||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ib?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},a.prototype.disconnect_=function(){eb&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},a.prototype.onTransitionEnd_=function(a){var b=a.propertyName,c=void 0===b?"":b,d=hb.some(function(a){return!!~c.indexOf(a)});d&&this.refresh()},a.getInstance=function(){return this.instance_||(this.instance_=new a),this.instance_},a.instance_=null,a}(),kb=function(a,b){for(var c,d=0,e=Object.keys(b);d<e.length;d++)c=e[d],Object.defineProperty(a,c,{value:b[c],enumerable:!1,writable:!1,configurable:!0});return a},lb=function(a){var b=a&&a.ownerDocument&&a.ownerDocument.defaultView;return b||fb},mb=$(0,0,0,0),nb=function(){return"undefined"==typeof SVGGraphicsElement?function(a){return a instanceof lb(a).SVGElement&&"function"==typeof a.getBBox}:function(a){return a instanceof lb(a).SVGGraphicsElement}}(),ob=function(){function a(a){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=$(0,0,0,0),this.target=a}return a.prototype.isActive=function(){var a=Y(this.target);return this.contentRect_=a,a.width!==this.broadcastWidth||a.height!==this.broadcastHeight},a.prototype.broadcastRect=function(){var a=this.contentRect_;return this.broadcastWidth=a.width,this.broadcastHeight=a.height,a},a}(),pb=function(){return function(a,b){var c=Z(b);kb(this,{target:a,contentRect:c})}}(),qb=function(){function a(a,b,c){if(this.activeObservations_=[],this.observations_=new db,"function"!=typeof a)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=a,this.controller_=b,this.callbackCtx_=c}return a.prototype.observe=function(a){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(a instanceof lb(a).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var b=this.observations_;b.has(a)||(b.set(a,new ob(a)),this.controller_.addObserver(this),this.controller_.refresh())}},a.prototype.unobserve=function(a){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(a instanceof lb(a).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var b=this.observations_;b.has(a)&&(b.delete(a),!b.size&&this.controller_.removeObserver(this))}},a.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},a.prototype.gatherActive=function(){var a=this;this.clearActive(),this.observations_.forEach(function(b){b.isActive()&&a.activeObservations_.push(b)})},a.prototype.broadcastActive=function(){if(this.hasActive()){var a=this.callbackCtx_,b=this.activeObservations_.map(function(a){return new pb(a.target,a.broadcastRect())});this.callback_.call(a,b,a),this.clearActive()}},a.prototype.clearActive=function(){this.activeObservations_.splice(0)},a.prototype.hasActive=function(){return 0<this.activeObservations_.length},a}(),rb="undefined"==typeof WeakMap?new db:new WeakMap,sb=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var c=jb.getInstance(),d=new qb(b,c,this);rb.set(this,d)}return a}();["observe","unobserve","disconnect"].forEach(function(a){sb.prototype[a]=function(){var b;return(b=rb.get(this))[a].apply(b,arguments)}});var tb=function(){return"undefined"==typeof fb.ResizeObserver?sb:fb.ResizeObserver}();const ub=[{attr:"media_title"},{attr:"media_artist"},{attr:"media_series_title"},{attr:"media_season",prefix:"S"},{attr:"media_episode",prefix:"E"},{attr:"app_name"}],vb=["media_duration","media_position","media_position_updated_at"];class wb{constructor(a,b,c){this.hass=a||{},this.config=b||{},this.entity=c||{},this.state=this.entity.state,this.attr=c.attributes,this.idle=!!this.config.idle_view&&this.idleView,this.active=this.isActive}get icon(){return this.attr.icon}get isPaused(){return"paused"===this.state}get isPlaying(){return"playing"===this.state}get isIdle(){return"idle"===this.state}get isStandby(){return"standby"===this.state}get isUnavailable(){return"unavailable"===this.state}get isOff(){return"off"===this.state}get isActive(){return!this.isOff&&!this.isUnavailable&&!this.idle||!1}get shuffle(){return this.attr.shuffle||!1}get content(){return this.attr.media_content_type||"none"}get mediaDuration(){return this.attr.media_duration||0}get updatedAt(){return this.attr.media_position_updated_at||0}get position(){return this.attr.media_position||0}get name(){return this.attr.friendly_name||""}get groupCount(){return this.group.length}get group(){const a="".concat(this.config.speaker_group.platform,"_group");return this.attr[a]||[]}get master(){return this.group[0]||this.config.entity}get isMaster(){return this.master===this.config.entity}get sources(){return this.attr.source_list||[]}get source(){return this.attr.source||""}get muted(){return this.attr.is_volume_muted||!1}get vol(){return this.attr.volume_level||0}get picture(){return this.attr.entity_picture}get hasArtwork(){return this.picture&&"none"!==this.config.artwork&&this.active&&!this.idle}get mediaInfo(){return ub.map(a=>N({text:this.attr[a.attr],prefix:""},a)).filter(a=>a.text)}get hasProgress(){return!this.config.hide.progress&&!this.idle&&vb.every(a=>a in this.attr)}get progress(){return this.position+(Date.now()-new Date(this.updatedAt).getTime())/1e3}get idleView(){const a=this.config.idle_view;return!!(a.when_idle&&this.isIdle||a.when_standby&&this.isStandby||a.when_paused&&this.isPaused)||!!(this.updatedAt&&a.after&&!this.isPlaying)&&this.checkIdleAfter(a.after)}get trackIdle(){return this.active&&!this.isPlaying&&this.updatedAt&&this.config.idle_view&&this.config.idle_view.after}checkIdleAfter(a){const b=(Date.now()-new Date(this.updatedAt).getTime())/1e3;return this.idle=b>60*a,this.active=this.isActive,this.idle}get supportShuffle(){return"undefined"!=typeof this.attr.shuffle}async fetchThumbnail(){try{const a=await this.hass.callWS({type:"media_player_thumbnail",entity_id:this.config.entity}),b=a.content_type,c=a.content;return"url(data:".concat(b,";base64,").concat(c,")")}catch(a){return console.error("mini-media-player: Failed fetching thumbnail"),!1}}toggle(a){return this.config.toggle_power?this.callService(a,"toggle"):this.isOff?this.callService(a,"turn_on"):void this.callService(a,"turn_off")}setSource(a,b){this.callService(a,"select_source",{source:b})}next(a){this.callService(a,"media_next_track")}setVolume(a){const b=parseFloat(a.target.value)/100;this.config.speaker_group.sync_volume?this.group.forEach(c=>{const d=this.config.speaker_group.entities.find(a=>a.entity_id===c)||{};let e=b;d.volume_offset&&(e+=d.volume_offset/100,1<e&&(e=1),0>e&&(e=0)),this.callService(a,"volume_set",{entity_id:c,volume_level:e})}):this.callService(a,"volume_set",{entity_id:this.config.entity,volume_level:b})}callService(a,b,c){a.stopPropagation(),this.hass.callService("media_player",b,N({entity_id:this.config.entity},c))}}const xb=function css(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];const e=c.reduce((b,c,d)=>b+ab(c)+a[d+1],a[0]);return new _a(e,$a)}(L()),yb={shuffle:!0,power_state:!0,artwork_border:!0,icon_state:!0},zb={DEFAULT:"mdi:cast",DROPDOWN:"mdi:chevron-down",GROUP:"mdi:speaker-multiple",MENU:"mdi:menu-down",MUTE:{true:"mdi:volume-off",false:"mdi:volume-high"},NEXT:"mdi:skip-next",PLAY:{true:"mdi:pause",false:"mdi:play"},POWER:"mdi:power",PREV:"mdi:skip-previous",SEND:"mdi:send",SHUFFLE:"mdi:shuffle",STOP:"mdi:stop",VOL_DOWN:"mdi:volume-minus",VOL_UP:"mdi:volume-plus"},Ab=["entity","source","_progress","_pos","_overflow","break","thumbnail","edit","idleView"];customElements.get("mwc-button")||customElements.define("mwc-button",class extends customElements.get("paper-button"){}),customElements.get("ha-slider")||customElements.define("ha-slider",class extends customElements.get("ha-slider"){});class Bb extends cb{constructor(){super(),this._overflow=!1,this.initial=!0,this.picture=!1,this.thumbnail=!1,this.edit=!1,this.idleView=!1,this.rtl=!1}static get properties(){return{_hass:{},config:{},entity:{},player:{},source:String,_overflow:Boolean,break:Boolean,initial:Boolean,picture:String,thumbnail:String,edit:Boolean,_progress:Boolean,_pos:Number,idleView:Boolean,rtl:Boolean}}static get styles(){return xb}set hass(a){const b=a.states[this.config.entity];this._hass=a,b&&this.entity!==b&&(this.entity=b,this.player=new wb(a,this.config,b),this.progress=this.player.hasProgress,this.idleView=this.player.idle,this.rtl=this._computeRTL(a),this.player.trackIdle&&this._updateIdle())}get hass(){return this._hass}set overflow(a){this._overflow!==a&&(this._overflow=a)}get overflow(){return this._overflow}set progress(a){this._progress!==a&&(this._progress=a,!0===this.progress&&this._updateProgress())}get progress(){return this._progress}set pos(a){this._pos!==a&&(this._pos=a)}get pos(){return this._pos}setConfig(a){if(!a.entity||"media_player"!==a.entity.split(".")[0])throw new Error("Specify an entity from within the media_player domain.");const b=N({artwork:"default",info:"default",max_volume:100,more_info:!0,shortcuts:{},source:"default",title:"",toggle_power:!0},a,{hide:N({},yb,a.hide),speaker_group:N({show_group_count:!0,platform:"sonos"},a.sonos,a.speaker_group)});b.max_volume=+b.max_volume||100,b.collapse=b.hide.controls||b.hide.volume,b.info=b.collapse&&"scroll"!==b.info?"short":b.info,b.flow=b.hide.icon&&b.hide.name&&b.hide.info,this.config=b}shouldUpdate(a){return void 0===this.break&&this._computeRect(this),Ab.some(b=>a.has(b))&&this.player}firstUpdated(){const a=new tb(a=>{a.forEach(a=>{window.requestAnimationFrame(()=>{"scroll"===this.config.info&&this._computeOverflow(),this._resizeTimer||(this._computeRect(a),this._resizeTimer=setTimeout(()=>{this._resizeTimer=null,this._computeRect(this._resizeEntry)},250)),this._resizeEntry=a})})});a.observe(this),setTimeout(()=>this.initial=!1,250),this.edit=this.config.speaker_group.expanded||!1}updated(){"scroll"===this.config.info&&setTimeout(()=>{this._computeOverflow()},10)}disconnectedCallback(){clearInterval(this._progressTracker)}render(){let a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this,b=a.config;const c=this._computeArtwork(),d=this.break?"break-width":b.hide.icon?"break-icon":"none";return Da(K(),d,this.initial,b.background,b.group,b.more_info,""!==b.title,b.artwork,c,this.player.state,b.flow,b.collapse,this.player.content,this.rtl,()=>this._handleMore(),this._renderArtwork(c),b.title,this.player.idle,this._renderIcon(c),this._renderEntityName(),this._renderMediaInfo(),this._renderPowerStrip(),!b.collapse&&this.player.active?this._renderControlRow():"",b.shortcuts.buttons?this._renderButtons():"",b.shortcuts.list?this._renderList():"",b.tts?this._renderTts():"",this.edit?this._renderGroupList():"",this.progress?this._renderProgress():"")}get name(){return this.config.name||this.player.name}_speakerCount(){if(this.config.speaker_group.show_group_count){const a=this.player.groupCount;return 1<a?" +".concat(a-1):""}}_computeArtwork(){const a=this.player,b=a.picture,c=a.hasArtwork;return c&&b!==this.picture&&(this.player.fetchThumbnail().then(a=>{this.thumbnail=a}),this.picture=b),!!(c&&this.thumbnail)}_computeIcon(){return this.config.icon?this.config.icon:this.player.icon||zb.DEFAULT}_computeOverflow(){const a=this.shadowRoot.querySelector(".marquee");if(a){const b=a.clientWidth>a.parentNode.clientWidth;this.overflow=!!(b&&this.player.active)&&7.5+a.clientWidth/50}}_computeRect(a){const b=a.contentRect||a.getBoundingClientRect(),c=b.left,d=b.width;this.break=d+2*c<390}_computeRTL(a){const b=a.language||"en";return!!a.translationMetadata.translations[b]&&(a.translationMetadata.translations[b].isRTL||!1)}_computeRTLDirection(){return this.rtl?"rtl":"ltr"}_renderArtwork(a){if(this.thumbnail||this.config.background){const b=this.config.background&&(!a||"default"===this.config.artwork)?"url(".concat(this.config.background,")"):this.thumbnail;return Da(J(),b)}}_renderIcon(a){return this.config.hide.icon?void 0:this.player.active&&a&&"default"===this.config.artwork?Da(I(),!this.config.hide.artwork_border,this.thumbnail,this.player.state):Da(H(),this._computeIcon(),!this.config.hide.icon_state&&(this.player.active||this.idle))}_renderPowerButton(){return Da(G(),zb.POWER,a=>this.player.toggle(a),!this.config.hide.power_state&&(this.player.active||this.idle))}_renderButton(a,b){let c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},d=!!(3<arguments.length&&arguments[3]!==void 0)&&arguments[3];return Da(F(),a,d,a=>this._callService(a,b,c))}_renderEntityName(){return this.config.hide.name?void 0:Da(E(),this.name,this._speakerCount())}_renderMediaInfo(){if(!this.config.hide.info){const a=this.player.mediaInfo;return Da(D(),"short"===this.config.info||!this.player.active,"scroll"===this.config.info,this.overflow,this.overflow,"scroll"===this.config.info?Da(C(),a.map(a=>Da(B(),"attr__".concat(a.attr),a.prefix+a.text))):"",a.map(a=>Da(A(),"attr__".concat(a.attr),a.prefix+a.text)))}}_renderProgress(){return this.player.idle?void 0:Da(z(),a=>this._handleSeek(a),this.pos,this.player.mediaDuration)}_renderLabel(a){let b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"Unknown";return Da(y(),this._getLabel(a,b))}_renderIdleStatus(){return this.player.isPaused?this._renderButton(zb.PLAY[this.player.isPlaying],"media_play_pause"):this._renderLabel("state.media_player.idle","Idle")}_renderShuffleButton(){if(this.player.supportShuffle){const a=!this.player.shuffle||!1;return this._renderButton(zb.SHUFFLE,"shuffle_set",{shuffle:a},!a)}}_renderPowerStrip(){let a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this,b=a.config;return this.player.isUnavailable?this._renderLabel("state.default.unavailable","Unavailable"):Da(x(),this.player.active&&b.collapse?this._renderControlRow():"",this.player.idle?this._renderIdleStatus():"",this._renderSource(),b.speaker_group.entities?this._renderGroupButton():"",b.hide.power?"":this._renderPowerButton())}_renderGroupButton(){return Da(w(),zb.GROUP,2>this.player.groupCount,this.edit,a=>this._handleGroupButton(a))}_renderGroupList(){const a=this.config.speaker_group.entities,b=this.player,c=b.group,d=b.master,f=b.isMaster;return Da(v(),a.map(a=>this._renderGroupListItem(a,c,d)),2>c.length,a=>this._handleGroupItemChange(a,f?c:this.config.entity,!1),f?Da(u()):Da(t()),!f,b=>this._handleGroupItemChange(b,a.map(a=>a.entity_id),!0))}_renderGroupListItem(a,b,c){const d=a.entity_id===this.config.entity||b.includes(a.entity_id),e=a.entity_id===this.config.entity||c!==this.config.entity;return Da(s(),d,e,b=>this._handleGroupItemChange(b,a.entity_id,!d),a.name,a.entity_id===c?Da(r()):"")}_renderSource(){const a=this.player,b=a.source,c=a.sources;if(0===c.length||this.config.hide.source)return;const d=c.indexOf(b),e="icon"===this.config.source||this.config.collapse||this.break||this.player.idle?Da(q(),zb.DROPDOWN):Da(p(),this.config.source,this.source||b,zb.DROPDOWN);return Da(o(),"right","top",40,!0,a=>a.stopPropagation(),e,d,a=>this._handleSource(a,a.target.getAttribute("value")),c.map(a=>Da(n(),a,a)))}_renderControlRow(){return Da(m(),this.config.hide.volume?"":this._renderVolControls(),this.config.hide.shuffle?"":this._renderShuffleButton(),this.config.hide.controls?"":this._renderMediaControls())}_renderMediaControls(){return Da(l(),this._renderButton(zb.PREV,"media_previous_track"),this._renderButton(zb.PLAY[this.player.isPlaying],"media_play_pause"),this._renderButton(zb.NEXT,"media_next_track"))}_renderVolControls(){return this.config.volume_stateless?this._renderVolButtons(this.player.muted):this._renderVolSlider(this.player.muted)}_renderMuteButton(a){if(!this.config.hide.mute)switch(this.config.replace_mute){case"play":return this._renderButton(zb.PLAY[this.player.isPlaying],"media_play_pause");case"stop":return this._renderButton(zb.STOP,"media_stop");case"next":return this._renderButton(zb.NEXT,"media_next_track");default:return this._renderButton(zb.MUTE[a],"volume_mute",{is_volume_muted:!a});}}_renderVolSlider(){let a=!!(0<arguments.length&&arguments[0]!==void 0)&&arguments[0];return Da(k(),this._renderMuteButton(a),a,a=>this.player.setVolume(a),a=>a.stopPropagation(),this.config.max_volume,100*this.player.vol,this._computeRTLDirection())}_renderVolButtons(){let a=!!(0<arguments.length&&arguments[0]!==void 0)&&arguments[0];return Da(j(),this._renderMuteButton(a),this._renderButton(zb.VOL_DOWN,"volume_down"),this._renderButton(zb.VOL_UP,"volume_up"))}_renderTts(){return Da(i(),this._getLabel("ui.card.media_player.text_to_speak","Say"),a=>a.stopPropagation(),a=>this._handleTts(a))}_renderList(){if(!this.config.shortcuts.hide_when_off||this.player.active){const a=this.config.shortcuts.list;return Da(h(),!0,a=>a.stopPropagation(),"Select media...",zb.DROPDOWN,a.map((a,b)=>Da(g(),a=>this._handleShortcut(a,"list",b),a.icon?Da(f(),a.icon):"",a.name?Da(e(),a.name):"")))}}_renderButtons(){if(!this.config.shortcuts.hide_when_off||this.player.active){const e=this.config.shortcuts.buttons;return Da(d(),e.map((d,f)=>Da(c(),this.config.shortcuts.columns,a=>this._handleShortcut(a,"buttons",f),d.icon?Da(b(),d.icon):"",d.name?Da(a(),d.name):"")))}}_callService(a,b,c){let d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:"media_player";a.stopPropagation();const e=N({entity_id:this.config.entity},c);this.hass.callService(d,b,e)}_handleSeek(a){const b=this.player.mediaDuration,c=a.offsetX/a.target.offsetWidth*b;this._callService(a,"media_seek",{seek_position:c})}_handleTts(a){const b=this.shadowRoot.querySelector(".tts paper-input"),c=b.value,d={message:c},e=this.config.tts;e.entity_id&&(d.entity_id=e.entity_id),e.language&&(d.language=e.language),"alexa"===e.platform?this.hass.callService("notify","alexa_media",{message:c,data:{type:e.type||"tts"},target:d.entity_id||this.config.entity}):"sonos"===e.platform?this.hass.callService("script","sonos_say",{sonos_entity:this.config.entity,volume:e.volume||.5,message:c}):"ga"===e.platform?this.hass.callService("notify","ga_broadcast",{message:c}):this._callService(a,"".concat(e.platform,"_say"),d,"tts"),a.stopPropagation(),b.value=""}_handleShortcut(a,b,c){const d=this.config.shortcuts[b][c],e=d.type,f=d.id;if("source"===e)return this._handleSource(a,f);if("script"===e)return this._callService(a,"turn_on",{entity_id:f},"script");this._callService(a,"play_media",{media_content_type:e,media_content_id:f})}_handleMore(){if(this.config.more_info){const a=new Event("hass-more-info",{composed:!0});a.detail={entityId:this.config.entity},this.dispatchEvent(a)}}_handleSource(a,b){this.player.setSource(a,b),this.source=b}_handleGroupButton(a){a.stopPropagation(),this.edit=!this.edit}_handleGroupItemChange(a,b,c){const d=this.config.speaker_group.platform,e={entity_id:b};c?(e.master=this.config.entity,this._callService(a,"".concat(d,"_JOIN"),e)):this._callService(a,"".concat(d,"_UNJOIN"),e)}_updateProgress(){this.pos=this.player.progress,this._progressTracker||(this._progressTracker=setInterval(()=>this._updateProgress(),1e3)),this.player.isPlaying||(this.progress="paused",clearInterval(this._progressTracker),this._progressTracker=null)}_updateIdle(){this._idleTracker&&clearTimeout(this._idleTracker);const a=(Date.now()-new Date(this.player.updatedAt).getTime())/1e3;this._idleTracker=setTimeout(()=>{this.idleView=this.player.checkIdleAfter(this.config.idle_view.after),this._idleTracker=null},1e3*(60*this.config.idle_view.after-a))}_getLabel(a){let b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"unknown";const c=this.hass.selectedLanguage||this.hass.language,d=this.hass.resources[c];return d&&d[a]?d[a]:b}getCardSize(){return this.config.collapse?1:2}}customElements.define("mini-media-player",Bb)})})();
